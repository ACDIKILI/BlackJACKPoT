<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>BlackJACK Pot - ACDgames</title>
    <style>
        /* Mevcut stilleriniz aynen korunmuştur */
        body { background-color: #1a1a1a; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; font-family: sans-serif; overflow: hidden; touch-action: none; }
        .phone { width: 100%; max-width: 360px; height: 100vh; max-height: 640px; background: radial-gradient(circle, #1a5d1a 0%, #0a3d0a 100%); border: 8px solid #333; border-radius: 40px; position: relative; box-shadow: 0 0 50px rgba(0,0,0,0.8); display: flex; flex-direction: column; align-items: center; box-sizing: border-box; }
        .login-screen { position: absolute; inset: 0; background: rgba(0,0,0,0.98); z-index: 5000; display: flex; flex-direction: column; justify-content: center; align-items: center; border-radius: 32px; padding: 20px; text-align: center; }
        .login-input { padding: 15px; border-radius: 10px; border: 2px solid gold; margin: 15px 0; width: 80%; font-size: 20px; text-transform: uppercase; background: #222; color: white; text-align: center; }
        .login-btn { padding: 15px 40px; background: gold; border: none; border-radius: 12px; font-weight: bold; font-size: 18px; cursor: pointer; }
        .user-panel { position: absolute; top: 15px; right: 25px; color: white; font-size: 11px; text-align: right; z-index: 100; }
        .header-area { height: 25%; width: 100%; display: flex; flex-direction: column; align-items: center; justify-content: center; position: relative; }
        .deck-box { width: 80px; height: 110px; background: linear-gradient(135deg, #c0392b, #8e44ad); border: 3px solid white; border-radius: 8px; display: flex; justify-content: center; align-items: center; color: white; font-size: 40px; cursor: pointer; z-index: 10; }
        .timer-container { position: absolute; left: 35px; top: 38%; transform: translateY(-50%); width: 70px; height: 70px; display: flex; justify-content: center; align-items: center; }
        .timer-text { color: #ff4d4d; font-size: 24px; font-weight: bold; font-family: monospace; z-index: 5; }
        .timer-glow { position: absolute; inset: -4px; border: 4px solid transparent; border-top-color: #ff4d4d; border-radius: 50%; }
        .info-btn { width: 35px; height: 35px; border-radius: 50%; background: rgba(255,255,255,0.2); border: 2px solid white; color: white; display: flex; justify-content: center; align-items: center; font-weight: bold; cursor: pointer; position: absolute; right: 35px; top: 48%; transform: translateY(-50%); font-style: italic; z-index: 1000; }
        .is-running { animation: rotateGlow 2s linear infinite; }
        @keyframes rotateGlow { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .total-score { color: #f1c40f; font-size: 24px; font-weight: bold; text-shadow: 2px 2px 4px #000; background: rgba(0,0,0,0.4); padding: 5px 20px; border-radius: 15px; z-index: 60; text-align: center; }
        .slots { width: 100%; display: flex; justify-content: space-around; padding: 0 5px; position: absolute; bottom: 80px; box-sizing: border-box; }
        .slot { width: 22%; height: 115px; border: 2px dashed rgba(255,255,255,0.3); border-radius: 10px; display: flex; flex-direction: column; align-items: center; color: white; position: relative; padding-top: 5px; cursor: pointer; }
        .slot-score { font-size: 24px; font-weight: bold; pointer-events: none; }
        .bust-x { position: absolute; inset: 0; background: rgba(210, 0, 0, 0.95); display: none; justify-content: center; align-items: center; font-size: 14px; font-weight: bold; border-radius: 8px; color: white; z-index: 5; pointer-events: none; }
        .perfect-21 { border: 3px solid gold !important; background: rgba(255, 215, 0, 0.3) !important; }
        .score-final { position: absolute; top: 45% !important; left: 50% !important; transform: translate(-50%, -50%); z-index: 1500; width: 320px; padding: 20px; border-radius: 30px; border: 3px solid #f1c40f; background: #002200; color: #f1c40f; box-shadow: 0 0 30px rgba(0,0,0,0.9); text-align: center; }
        .leaderboard-title { color: #f1c40f; font-size: 18px; font-weight: bold; margin-bottom: 15px; text-transform: uppercase; }
        .leaderboard-row { display: flex; justify-content: space-between; font-size: 16px; margin: 8px 0; font-family: sans-serif; }
        .leaderboard-name { flex-grow: 1; text-align: left; padding-left: 10px; }
        .leaderboard-score { text-align: right; }
        .flying-card { position: absolute; width: 70px; height: 100px; background: white; border-radius: 8px; z-index: 100; display: flex; justify-content: center; align-items: center; font-weight: bold; font-size: 22px; border: 2px solid #333; pointer-events: none; }
        .modal-overlay { position: absolute; inset: 0; background: #0a3d0a; display: none; z-index: 6000; border-radius: 32px; border: 8px solid #333; }
        .modal { padding: 30px 20px; color: white; text-align: center; height: 100%; box-sizing: border-box; display: flex; flex-direction: column; align-items: center; overflow-y: auto; }
        .signature { position: absolute; bottom: 15px; color: #fff; font-size: 12px; font-weight: 900; }
    </style>
</head>
<body id="mainBody">

<div class="phone" id="gameArea">
    <div id="loginScreen" class="login-screen">
        <h1 style="color:gold;">BlackJACK Pot</h1>
        <input type="text" id="pNameInput" class="login-input" placeholder="İSİM YAZINIZ">
        <button class="login-btn" onclick="checkUser()">GİRİŞ YAP</button>
    </div>

    <div class="user-panel" id="uPanel" style="display:none;">
        <span id="pNameDisp" style="font-weight:bold; color:gold;">...</span><br>
        <span>TOPLAM: <span id="pScoreDisp">0</span></span>
    </div>

    <div class="header-area">
        <div class="timer-container">
            <div class="timer-glow" id="timerGlow"></div>
            <div class="timer-text" id="timerDisplay">30</div>
        </div>
        <div class="deck-box" id="deck" onclick="baslat()">?</div>
        <div class="info-btn" onclick="modalAc()">i</div>
    </div>
    
    <div class="score-area"><div class="total-score" id="toplam">PUAN: 0</div></div>
    <div class="slots" id="slotsContainer">
        <div class="slot" id="maca" onclick="slotKapat('maca')"><span style="font-size:11px; color:gold;">x4</span><span style="font-size:30px">♠</span><span class="slot-score">0</span><div class="bust-x">KAPALI</div></div>
        <div class="slot" id="kupa" onclick="slotKapat('kupa')"><span style="font-size:11px; color:gold;">x3</span><span style="color:#e74c3c; font-size:30px">♥</span><span class="slot-score">0</span><div class="bust-x">KAPALI</div></div>
        <div class="slot" id="sinek" onclick="slotKapat('sinek')"><span style="font-size:11px; color:gold;">x2</span><span style="font-size:30px">♣</span><span class="slot-score">0</span><div class="bust-x">KAPALI</div></div>
        <div class="slot" id="karo" onclick="slotKapat('karo')"><span style="font-size:11px; color:gold;">x1</span><span style="color:#e74c3c; font-size:30px">♦</span><span class="slot-score">0</span><div class="bust-x">KAPALI</div></div>
    </div>

    <div class="signature">A.C.Dikili & Gemini.AI</div>
</div>

<script>
    let curUser = "", curTotal = 0;
    const mults = { maca: 4, kupa: 3, sinek: 2, karo: 1 };
    let tPuan = 0, sPuan = {maca:0, kupa:0, sinek:0, karo:0}, aktif = {maca:true, kupa:true, sinek:true, karo:true};
    let isAnim = false, gameOver = false, saniye = 30, timerStarted = false;

    // Firebase'siz Giriş Fonksiyonu
    function checkUser() {
        const input = document.getElementById('pNameInput').value.trim().toUpperCase();
        if(!input) { alert("İSİM YAZINIZ!"); return; }
        
        curUser = input;
        // Yerel hafızadan skoru çekelim (Firebase yerine)
        const savedScore = localStorage.getItem('ACD_PoT_Score_' + input);
        curTotal = savedScore ? parseInt(savedScore) : 0;

        document.getElementById('loginScreen').style.display = 'none';
        document.getElementById('uPanel').style.display = 'block';
        document.getElementById('pNameDisp').innerText = curUser;
        document.getElementById('pScoreDisp').innerText = curTotal;
    }

    // Oyun bittiğinde Firebase yerine yerel hafızaya (Local Storage) kaydediyoruz
    function bitti(msg) {
        gameOver = true;
        document.getElementById('deck').style.display = 'none';
        curTotal += tPuan;
        
        // Yerel hafızaya kaydet
        localStorage.setItem('ACD_PoT_Score_' + curUser, curTotal);
        document.getElementById('pScoreDisp').innerText = curTotal;

        alert(msg + "\nBU OYUN PUANI: " + tPuan + "\nTOPLAM KARİYER: " + curTotal);
        reloadGame();
    }

    // Geri kalan oyun fonksiyonlarınız (baslat, kartCek vb.) aynen kalacak
    function baslat() { if(!curUser) return; if(gameOver) { reloadGame(); return; } kartCek(); }
    function reloadGame() { location.reload(); }
    /* ... Diğer fonksiyonlar buraya eklenebilir ... */
</script>
</body>
</html>
